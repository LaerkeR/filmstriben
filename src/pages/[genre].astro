---
import filmgenre from "../filmgenre.json";
import filmdatabase from "../filmdatabase.json";
import MovieCard from "../components/Moviecard.astro";
import Layout from "../layouts/Layout.astro";

// const genre = filmdatabase.filter((film) => film.genre === {genre});

export async function getStaticPaths() {
  return filmgenre.map((genre) => {
    return {
      params: { genre: genre },
      props: { genreData: genre },
    };
  });
}

const { genre } = Astro.params;
const { genreData } = Astro.props;
console.log(filmdatabase.length);
const filtretGenre = filmdatabase.filter(
  (film) => film.genre === genreData || film.underGenre.includes(genreData)
);
---

<Layout title={genreData}>
  <h1>{genreData}</h1>

  <section class="grid grid-cols-3 w-full gap-4 px-10x">
    {
      filtretGenre.map(
        (film) => (
          console.log(film),
          (
            <MovieCard
              varighed={film.varighed}
              genre={film.genre}
              aarstal={film.aarstal}
              filmTitle={film.filmTitel}
              imgSrc={`../img/${film.imgTema}/${film.imgTitel}/imgCard.webp`}
              slug={film.slug}
              point={film.point}
            />
          )
        )
      )
    }
  </section>
</Layout>
